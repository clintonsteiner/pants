# 2.20.x Release Series

Pants 2 is a fast, scalable, user-friendly build system for codebases of all sizes. It's currently focused on Python, Go, Java, Scala, Kotlin, Shell, and Docker, with support for other languages and frameworks coming soon.

Individuals and companies can now [sponsor Pants financially](https://www.pantsbuild.org/sponsorship).

Pants is an open-source project that is not owned or controlled by any one company or organization, and does incur some expenses. These expenses are managed by Pants Build, a non-profit that was established for this purpose. This non-profit's only source of revenue is sponsorship by individuals and companies that use Pants.

We offer [formal sponsorship tiers for companies](https://www.pantsbuild.org/sponsorship), as well as individual sponsorships via [GitHub](https://github.com/sponsors/pantsbuild).

## What's New

### Highlights

- Support for the Ruff formatter, for both `BUILD` files and normal Python files.

### Overall

### BUILD files

The new `pants.backend.build_files.fmt.ruff` backend allows using [the Ruff formatter](https://docs.astral.sh/ruff/formatter/) to format `BUILD` files.

### Backends

#### Python

Several improvements have been made to Pants' support for Ruff:

- The new `pants.backend.experimental.python.lint.ruff.format` backend allows using [the Ruff formatter](https://docs.astral.sh/ruff/formatter/) to format Python files.
- The existing `pants.backend.experimental.python.lint.ruff` linter backend has been renamed to `pants.backend.experimental.python.lint.ruff.check`, and its tool ID (as used by commands like `pants lint --only=...`) has changed from `ruff` to `ruff-check`.
- Pants now automatically finds Ruff configuration in `pyproject.toml` files in subdirectories, for instance, `python/pyproject.toml`.
- Pants' built-in default version has been updated to 0.2.1.

### Plugin API changes

## Full Changelog

For the full changelog, see the individual GitHub Releases for this series: https://github.com/pantsbuild/pants/releases


# release_2.20.0rc1

## Bug Fixes

* Docker: fix base image dependency inference for parametrized targets. (Cherry-pick of #20633) ([#20657](https://github.com/pantsbuild/pants/pull/20657))

# release_2.20.0rc0

## Bug Fixes

* Resolve adhoc_tool, code_quality_tool execution dependencies relative to target location (Cherry-pick of #20581) ([#20608](https://github.com/pantsbuild/pants/pull/20608))

* Silence warnings from Pex by default, for now (Cherry-pick of #20590) ([#20593](https://github.com/pantsbuild/pants/pull/20593))

* Fix update build files formatter selection (Cherry-pick of #20580) ([#20582](https://github.com/pantsbuild/pants/pull/20582))

* Remove asm -compiling-runtime flag for go 1.22+ compatible versions (Cherry-pick of #20554) ([#20562](https://github.com/pantsbuild/pants/pull/20562))

## Documentation

* Document the need for migrating tool to user lockfiles for export (Cherry-pick of #20604) ([#20613](https://github.com/pantsbuild/pants/pull/20613))

* Update `doc_url` calls for new website (Cherry-pick of #20583) ([#20588](https://github.com/pantsbuild/pants/pull/20588))

* docs: export dependency graph as adjacency list (Cherry-pick of #20566) ([#20585](https://github.com/pantsbuild/pants/pull/20585))

* Restructure JVM docs. (Cherry-pick of #20544) ([#20564](https://github.com/pantsbuild/pants/pull/20564))

# release_2.20.0a0

## New Features

* add more module mappings for popular packages ([#20551](https://github.com/pantsbuild/pants/pull/20551))

* Docker: Add `full_directory` interpolation value for repository configuration. ([#20530](https://github.com/pantsbuild/pants/pull/20530))

* stats: add output_file option to output the stats to a file ([#20512](https://github.com/pantsbuild/pants/pull/20512))

* python: respect closed option when exporting dependency graph as JSON ([#20523](https://github.com/pantsbuild/pants/pull/20523))

* Generate `jvm_artifact` targets from `pom.xml` ([#20336](https://github.com/pantsbuild/pants/pull/20336))

* Add support for the pex `--executable` argument ([#20497](https://github.com/pantsbuild/pants/pull/20497))

* python: improve error message when parsing Python interpreter constraints ([#20297](https://github.com/pantsbuild/pants/pull/20297))

* upgrade known terraform versions ([#20469](https://github.com/pantsbuild/pants/pull/20469))

* options: do not ignore .github directory with pants_ignore ([#20471](https://github.com/pantsbuild/pants/pull/20471))

* Add (optional) support for podman. ([#20470](https://github.com/pantsbuild/pants/pull/20470))

* python: add _typeshed module to the list of unowned dependencies ([#20468](https://github.com/pantsbuild/pants/pull/20468))

* Terraform lockfiles (take 2) ([#20303](https://github.com/pantsbuild/pants/pull/20303))

* Extend dependents goal with output format to support JSON ([#20453](https://github.com/pantsbuild/pants/pull/20453))

* Extend dependencies goal with output format to support JSON ([#20443](https://github.com/pantsbuild/pants/pull/20443))

## Plugin API Changes

* Allow AbstractLintRequest subclasses to disable lint rules ([#20407](https://github.com/pantsbuild/pants/pull/20407))

## Bug Fixes

* stop swallowing warnings from Pex by default ([#20480](https://github.com/pantsbuild/pants/pull/20480))

* javascript: fix running scripts with yarn ([#20543](https://github.com/pantsbuild/pants/pull/20543))

* docker: fix missing image_id when using containerd-snapshotter ([#20533](https://github.com/pantsbuild/pants/pull/20533))

* Bump PyO3 to 0.20 to fix backtraces ([#20517](https://github.com/pantsbuild/pants/pull/20517))

* Fix formatting of the "pex.platforms is deprecated" message ([#20514](https://github.com/pantsbuild/pants/pull/20514))

* Handle unresolved ambiguous entrypoint dependency for PEX as unowned dependency ([#20390](https://github.com/pantsbuild/pants/pull/20390))

* plumb through Pex's --check zipapp validation ([#20481](https://github.com/pantsbuild/pants/pull/20481))

* Allow unmatching "changed" globs  ([#20505](https://github.com/pantsbuild/pants/pull/20505))

* add module mapping overrides for some django-* modules ([#20504](https://github.com/pantsbuild/pants/pull/20504))

* upgrade Pex to 2.1.163 ([#20502](https://github.com/pantsbuild/pants/pull/20502))

* upgrade Pex to 2.1.162 ([#20496](https://github.com/pantsbuild/pants/pull/20496))

* Fix direct_url in python PEP660 editable wheels ([#20486](https://github.com/pantsbuild/pants/pull/20486))

* python-infer: respect ignore pragma w/ strings ([#20477](https://github.com/pantsbuild/pants/pull/20477))

* python-infer: Avoid false positive strings ([#20472](https://github.com/pantsbuild/pants/pull/20472))

* Don't eagerly merge configs. ([#20459](https://github.com/pantsbuild/pants/pull/20459))

* Docker: Update hadolint version to fix segmentation fault issue ([#20456](https://github.com/pantsbuild/pants/pull/20456))

## Documentation

* Fix reference to default_run_goal_use_sandbox option in docs. ([#20546](https://github.com/pantsbuild/pants/pull/20546))

* fix pants.log location in docs ([#20547](https://github.com/pantsbuild/pants/pull/20547))

* docs: mention .pants.bootstrap file ([#20538](https://github.com/pantsbuild/pants/pull/20538))

* docs: provide example of having a --option in [cli.alias] ([#20539](https://github.com/pantsbuild/pants/pull/20539))

* docs: provide options to refer to a group of targets ([#20522](https://github.com/pantsbuild/pants/pull/20522))

* docs: mention that when piping xargs may end up invoking Pants goal more than once ([#20521](https://github.com/pantsbuild/pants/pull/20521))

* docs: provide example how to convert target addresses to source files in rules API ([#20524](https://github.com/pantsbuild/pants/pull/20524))

* Fix Pex references to point to new home. ([#20519](https://github.com/pantsbuild/pants/pull/20519))

* Update broken link to default versioning scheme ([#20482](https://github.com/pantsbuild/pants/pull/20482))

* docs: fix slack channel references ([#20475](https://github.com/pantsbuild/pants/pull/20475))

* Add a test case for Pants integration testing docs ([#20451](https://github.com/pantsbuild/pants/pull/20451))

* Add a test case for Pants unit testing docs ([#20452](https://github.com/pantsbuild/pants/pull/20452))

* Rename tutorials section in the docs ([#20449](https://github.com/pantsbuild/pants/pull/20449))

# release_2.20.0.dev7

## New Features

* Add version/local scheme fields to `vcs_version` ([#20446](https://github.com/pantsbuild/pants/pull/20446))

* upgrade PEX to 2.1.159 ([#20416](https://github.com/pantsbuild/pants/pull/20416))

* Add jvm_index Option to Coursier Subsystem ([#20271](https://github.com/pantsbuild/pants/pull/20271))

* python-protobuf backend now support multiple protoc plugins. ([#20387](https://github.com/pantsbuild/pants/pull/20387))

## User API Changes

* Add remote_provider = "..." option, replacing scheme-look-ups ([#20240](https://github.com/pantsbuild/pants/pull/20240))

## Bug Fixes

* Fix issue with grouping parametrizations on target generators. ([#20429](https://github.com/pantsbuild/pants/pull/20429))

## Documentation

* Mention the Scala repl and its current gotchas in the docs ([#20445](https://github.com/pantsbuild/pants/pull/20445))

* Fix missing registration for environments rules in pants.core. ([#20444](https://github.com/pantsbuild/pants/pull/20444))

* Actually call `bin_name` in help string  ([#20434](https://github.com/pantsbuild/pants/pull/20434))

* Apply latest hand-edits to pantsbuild/pantsbuild.org repo ([#20419](https://github.com/pantsbuild/pants/pull/20419))

* Fix the weird headings of `initial-configuration.mdx` ([#20422](https://github.com/pantsbuild/pants/pull/20422))

* Update docker docs for buildx ([#20413](https://github.com/pantsbuild/pants/pull/20413))

* What's new in 2.19 ([#20310](https://github.com/pantsbuild/pants/pull/20310))

* Rename 'environments' docs file/URL to be simpler ([#20404](https://github.com/pantsbuild/pants/pull/20404))

# release_2.20.0.dev6

## New Features

* plumb sh-boot through to pex_binary ([#19925](https://github.com/pantsbuild/pants/pull/19925))

## Plugin API Changes

* Add support for positional arguments in by-name `@rule` calls ([#20366](https://github.com/pantsbuild/pants/pull/20366))

## Performance

* Upgrade to PEX 2.1.156 ([#20391](https://github.com/pantsbuild/pants/pull/20391))

* Update to Pex 2.1.155 ([#20347](https://github.com/pantsbuild/pants/pull/20347))

## Documentation

* Collapse "overview" pages ([#20401](https://github.com/pantsbuild/pants/pull/20401))

* Replace this repo's docs content with the update docusaurus content ([#20395](https://github.com/pantsbuild/pants/pull/20395))

* docs: update python test coverage docs ([#20335](https://github.com/pantsbuild/pants/pull/20335))

* Update the docs on how to profile Pants. ([#20334](https://github.com/pantsbuild/pants/pull/20334))

* Improve the cache nuking recommendation. ([#20385](https://github.com/pantsbuild/pants/pull/20385))

# release_2.20.0.dev5

## Bug Fixes

* fix: in-repo plugin requirements.txt not loading ([#20355](https://github.com/pantsbuild/pants/pull/20355))

* Fix: Include transitive dependencies for Terraform ([#20241](https://github.com/pantsbuild/pants/pull/20241))

* Allow using scalac plugins that emit additional compilation results ([#20357](https://github.com/pantsbuild/pants/pull/20357))

# release_2.20.0.dev4

## New Features

* Support dependency inference with JVM codegen backends ([#20285](https://github.com/pantsbuild/pants/pull/20285))

* Support coursier `--force-version` argument ([#20238](https://github.com/pantsbuild/pants/pull/20238))

## Bug Fixes

* Make docker_environment's Pants-provided-PBS an absolute path ([#20314](https://github.com/pantsbuild/pants/pull/20314))

* Fix algorithm for gathering prebuilt Go object files ([#20332](https://github.com/pantsbuild/pants/pull/20332))

* Allow docker image pulling without creds ([#20307](https://github.com/pantsbuild/pants/pull/20307))

* Ensure `experimental_test_shell_command` runs in relevant environment ([#20319](https://github.com/pantsbuild/pants/pull/20319))

## Documentation

* Update team.md ([#20329](https://github.com/pantsbuild/pants/pull/20329))

* Change the slug of the Shell backend doc. ([#20326](https://github.com/pantsbuild/pants/pull/20326))

# release_2.20.0.dev3

## New Features

* helm: add option to pass `--quiet` when linting charts ([#20204](https://github.com/pantsbuild/pants/pull/20204))

* Allow passing arbitrary args to PEX invocation when building FaaS artifacts ([#20237](https://github.com/pantsbuild/pants/pull/20237))

## Bug Fixes

* fix: terraform_relpath works on files not in direct subpath ([#20276](https://github.com/pantsbuild/pants/pull/20276))

* Fix: run `terraform validate` on modules again ([#20230](https://github.com/pantsbuild/pants/pull/20230))

## Documentation

* Don't use tabbed-codeblock in Markdown ([#20290](https://github.com/pantsbuild/pants/pull/20290))

# release_2.20.0.dev2

## New Features

* allow passing --timeout along to helm commands ([#20273](https://github.com/pantsbuild/pants/pull/20273))

* Add support for Scalac plugins in BSP ([#20267](https://github.com/pantsbuild/pants/pull/20267))

* typescript: add tailor goal ([#20252](https://github.com/pantsbuild/pants/pull/20252))

## Bug Fixes

* Use fork of indicatif to work around output truncation ([#20269](https://github.com/pantsbuild/pants/pull/20269))

* Validate that the file content has type bytes ([#20261](https://github.com/pantsbuild/pants/pull/20261))

## Documentation

* add `always` mode for `RemoteCacheWarningsBehavior` ([#20268](https://github.com/pantsbuild/pants/pull/20268))

* Include guidance on skipping files under Black & isort ([#20262](https://github.com/pantsbuild/pants/pull/20262))

# release_2.20.0.dev1

## New Features

* typescript: add TypeScript source and test targets ([#20226](https://github.com/pantsbuild/pants/pull/20226))

* Infers Django migrations and management commands as dependencies of `apps.py` ([#20250](https://github.com/pantsbuild/pants/pull/20250))

## User API Changes

* Add `remote_oauth_bearer_token` option, deprecating `remote_oauth_bearer_token_path` ([#20116](https://github.com/pantsbuild/pants/pull/20116))

## Bug Fixes

* Fix wrong jar path given to shade jar process ([#20239](https://github.com/pantsbuild/pants/pull/20239))

* Make FrozenDict comparisons & hash order-insensitive, compare to dict ([#20221](https://github.com/pantsbuild/pants/pull/20221))

## Documentation

* Add note in docker_environment image field help on tool requirements ([#20231](https://github.com/pantsbuild/pants/pull/20231))

* Add link to talk at Hamburg Python Pizza ([#20223](https://github.com/pantsbuild/pants/pull/20223))

# release_2.20.0.dev0

## New Features

* Code Quality Tool Lib ([#20135](https://github.com/pantsbuild/pants/pull/20135))

* Add docker image output field to support publish to repository when using BuildKit ([#20154](https://github.com/pantsbuild/pants/pull/20154))

## User API Changes

* Remove deprecated `[export].symlink_python_virtualenv` option ([#20214](https://github.com/pantsbuild/pants/pull/20214))

## Plugin API Changes

* Remove deprecated `@rule_helper` ([#20213](https://github.com/pantsbuild/pants/pull/20213))

## Bug Fixes

* Skip jvm dependencies without entries ([#20192](https://github.com/pantsbuild/pants/pull/20192))

* Support inferring JS deps from `export ... from ...` statements ([#20190](https://github.com/pantsbuild/pants/pull/20190))

* Remove print() statement ([#20196](https://github.com/pantsbuild/pants/pull/20196))

* Do not choke on values from macros on environment targets during bootstrap. ([#20191](https://github.com/pantsbuild/pants/pull/20191))

* Use a Zulu JDK 8 to run the Kotlin analyzer. ([#20184](https://github.com/pantsbuild/pants/pull/20184))

* Fix: support helm repos with trailing slashes ([#20177](https://github.com/pantsbuild/pants/pull/20177))
